Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 1



1                                  page    132,79
2                                  opt     rc
4      
5                        ;***************************************************************
6                        ;* G3RUH.ASM -- 9600 bit/s G3RUH modem                       *
7                        ;*                                                       *
8                        ;* 9600 bit/s two level PAM demodulation with fixed rate       *
9                        ;* sampling and adaptive equalizer.                          *
10                       ;*                                                       *
11                       ;* PAM demodulation is based on some ideas presented in book   *
12                       ;*      Lee, E., A., Messerschmitt, D., G.:                  *
13                       ;*      "Digital Communication",                            *
14                       ;*      Kluwer, 1988                                      *
15                       ;*                                                       *
16                       ;* Symbol synchronization is base on the article               *
17                       ;*      Mueller, K., H., Mller, M.:                        *
18                       ;*      "Timing Recovery in Digital Synchronous Data           *
19                       ;*      Receivers",                                            *
20                       ;*      IEEE Trans. on Comm., Vol. COM-23, No. 5, May 1976     *
21                       ;*                                                       *
22                       ;* This module uses registers as follows:                     *
23                       ;*  r0 - general purpose (temporary use)                      *
24                       ;*  r1 - general purpose (temporary use)                      *
25                       ;*  r2 - sample buffer pointer                              *
26                       ;*  r4 - output filter pointer                              *
27                       ;*  r6 - general purpose (temporary use)                      *
28                       ;*                                                       *
29                       ;* Copyright (C) 1993-1996 by Alef Null. All rights reserved.  *
30                       ;* Author(s): Jarkko Vuori, OH2LNS                           *
31                       ;* Modification(s):                                        *
32                       ;*      01.01.1996  Added support for both left and right      *
33                       ;*                 channels                               *
34                       ;*      22.03.1996  Modified for the new SPY program          *
35                       ;***************************************************************
36     
37                       ; User controllable parameters
38        000001         kiss      set     1         ; give KISS data (1)/debug data (0) for SPY
39        000001         iDuplex   set     1         ; full-duplex (1)/half-duplex (0) at start-up
40        3.000000E-001  OLevel    set     0.3       ; output signal level (in rms volts)
41        000000         Channel   set     0         ; left codec channel (0)/right codec channel (1)
42     
369    
370    
371                      ; Program parameters
372       000100         buflen    equ     256       ; codec sample buffer lenght
373    
374       4.800000E+004  fs        equ     48000.0   ; sampling frequency
375       9.600000E+003  fd        equ     9600.0    ; decision rate
376       000002         I         equ     2         ; interpolation factor
377       000005         D         equ     5         ; decimation factor 48k*(I/D)=19.2k
378    
379                      ; AGC
380       6.000000E-001  refLev    equ     0.6       ; reference level for AGC
381       00000F         agcN      equ     15        ; agc analyse block lenght
382       1.000000E+002  agcGain   equ     100.0     ; agc integrator gain
383    
384                      ; symbol synchro
385       9.900000E-001  rwfc0     equ     0.99      ; random walk filter ciefficient (carrier off)
386       3.000000E-001  rwfc1     equ     0.3       ; random walk filter ciefficient (carrier on)
387    
388                      ; DCD
389       2.000000E-002  DCDFil    equ     0.02      ; decision error IIR LPF coefficient
390       000B40         DCDN      equ     @cvi(0.3*fd+.5) ; delay (in s) after DCD off
391    
392                      ; G3RUH specific
393       010800         poly      equ     $10800    ; G3RUH,K9NG scrambler polynomial (x^17 + x^12 + 1)
394    
395                      ; flags
396       000000         xmit      equ     0         ; xmit on/off
397       000001         car       equ     1         ; carrier on/off
398    
399    
400                      ; macro for the PTT output handling
401                      ; O0 when left  channel is used
402                      ; O4 when right channel is used
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 2
G3RUH demodulator


403                      pttled    macro   mode
404  m                             if      Channel
405  m                             b\mode  #4,x:$ffe4
406  m                             else
407  m                             b\mode  #0,x:$ffe4
408  m                             endif
409  m                             endm
410    
411                      ; macro for DCD output handling
412                      ; O2 for both channels
413                      carled    macro   mode
414  m                             b\mode  #2,x:$ffe4
415  m                             endm
416    
417                      ; first order high-pass IIR filter
418                      ; input in a, output in a
419                      ; frq is -3dB point (fc/fs)
420                      hpass     macro   acc,frq,store
421  m                   c1        set     -1.0/@cos(6.28319*frq)*(1.0-@sin(6.28319*frq))
422  m                             move    acc,x0
423  m                             move    #>(1.0-c1)/2.0,y0
424  m                             mpyr    x0,y0,acc x:<store,y0
425  m                             move    acc,x:<store
426  m                             sub     y0,acc    x:<store+1,x0
427  m                             move    #>c1,y0
428  m                             macr    -x0,y0,acc
429  m                             move    acc,x:<store+1
430  m                             endm
431    
432    
433       P:0040                   org     p:
434    
435       P:0040 67F400            move              #buffer+2,r7 ; codec sample buffer ptr
                 000402
436       P:0042 05F427            move              #buflen*4-1,m7
                 0003FF
437    
438       P:0044 62F400            move              #buffer,r2  ; sample buffer read ptr
                 000400
439       P:0046 3A0300            move              #4-1,n2
440       P:0047 05F422            move              #buflen*4-1,m2
                 0003FF
441    
442       P:0049 64F400            move              #filtx,r4   ; transmit filter ptr
                 000030
443       P:004B 05F424            move              #oftaps-1,m4
                 00000A
444    
445                                if      kiss
446       P:004D 54F400            move              #reject,a1  ; serial interface to KISS mode
                 000146
447       P:004F 55F400            move              #ptt,b1
                 000147
448                                opensc
450                                endif
451    
452                      ; fs = 48 kHz, line input, line output, no gain and attenuation
453                                ctrlcd  1,r2,buflen,LINEI,0.0,0.0,LINEO,0.0,0.0
474                                opencd  fs/1000.0,NOHPF
504    
505                      ; wait for one complete block
506                      loop      waitblk r2,buflen,D
526                                if      Channel
528                                endif
529    
530                      ; then filter the left channel
531       P:006E 05F420            move              #buflen*4-1,m0
                 0003FF
532       P:0070 70F400            move              #-4,n0
                 FFFFFC
533    
534                      ; calculate even phase
535       P:0072 669B00            move              x:<eadr,r6
536       P:0073 225000            move              r2,r0
537       P:0074 200013            clr     a
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 3
G3RUH demodulator


538       P:0075 F0C800            move              x:(r0)+n0,x0 y:(r6)+,y0
539       P:0076 061BA0            rep     #iftaps-1
540       P:0077 F0C8D2            mac     x0,y0,a   x:(r0)+n0,x0 y:(r6)+,y0
541       P:0078 61F4D3            macr    x0,y0,a   #ocoeffs,r1
                 000020
542    
543                      ; high-pass filter the signal (to reject CS4215 offset)
544                                hpass   a,5.0/(2.0*fd),hpf ; fc = 5 Hz
554    
555                      ; AGC
556       P:0084 21C400            move              a,x0
557       P:0085 4EA200            move                          y:<agc,y0
558       P:0086 2000D0            mpy     x0,y0,a
559       P:0087 0608A0            rep     #8
560       P:0088 200032            asl     a
561       P:0089 5E1A00            move                          a,y:<s2
562    
563                      ; calculate two first phases of the output filter
564       P:008A 205A1B            clr     b         (r2)+
565       P:008B F09900            move              x:(r1)+,x0  y:(r4)+,y0
566       P:008C 060AA0            rep     #oftaps-1
567       P:008D F099DA            mac     x0,y0,b   x:(r1)+,x0  y:(r4)+,y0
568       P:008E 2000DB            macr    x0,y0,b
569       P:008F 5F4A00            move                          b,y:(r2)+n2
570    
571       P:0090 205A1B            clr     b         (r2)+
572       P:0091 F09900            move              x:(r1)+,x0  y:(r4)+,y0
573       P:0092 060AA0            rep     #oftaps-1
574       P:0093 F099DA            mac     x0,y0,b   x:(r1)+,x0  y:(r4)+,y0
575       P:0094 2000DB            macr    x0,y0,b
576       P:0095 5F4A00            move                          b,y:(r2)+n2
577    
578                      ; calculate odd phase
579       P:0096 669C00            move              x:<oadr,r6
580       P:0097 225000            move              r2,r0
581       P:0098 200013            clr     a
582       P:0099 F0C800            move              x:(r0)+n0,x0 y:(r6)+,y0
583       P:009A 061BA0            rep     #iftaps-1
584       P:009B F0C8D2            mac     x0,y0,a   x:(r0)+n0,x0 y:(r6)+,y0
585       P:009C 2000D3            macr    x0,y0,a
586    
587                      ; high-pass filter the signal (to reject CS4215 offset)
588                                hpass   a,5.0/(2.0*fd),hpf ; fc = 5 Hz
598    
599                      ; AGC
600       P:00A7 21C400            move              a,x0
601       P:00A8 4EA200            move                          y:<agc,y0
602       P:00A9 2000D0            mpy     x0,y0,a
603       P:00AA 0608A0            rep     #8
604       P:00AB 200032            asl     a
605       P:00AC 5E1800            move                          a,y:<s1
606    
607                      ; make decision (for symbol synchro)
608       P:00AD 44F403            tst     a         #refLev,x0
                 4CCCCD
609       P:00AF 023040            tpl     x0,a
610       P:00B0 44F400            move              #-refLev,x0
                 B33333
611       P:00B2 02B040            tmi     x0,a
612    
613       P:00B3 4C9900            move                          y:<d1,x0    ; update decisions
614       P:00B4 4C1B00            move                          x0,y:<d3
615       P:00B5 5E1900            move                          a,y:<d1
616    
617                      ; calculate three last phases of the output filter
618       P:00B6 205A1B            clr     b         (r2)+
619       P:00B7 F09900            move              x:(r1)+,x0  y:(r4)+,y0
620       P:00B8 060AA0            rep     #oftaps-1
621       P:00B9 F099DA            mac     x0,y0,b   x:(r1)+,x0  y:(r4)+,y0
622       P:00BA 2000DB            macr    x0,y0,b
623       P:00BB 5F4A00            move                          b,y:(r2)+n2
624    
625       P:00BC 205A1B            clr     b         (r2)+
626       P:00BD F09900            move              x:(r1)+,x0  y:(r4)+,y0
627       P:00BE 060AA0            rep     #oftaps-1
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 4
G3RUH demodulator


628       P:00BF F099DA            mac     x0,y0,b   x:(r1)+,x0  y:(r4)+,y0
629       P:00C0 2000DB            macr    x0,y0,b
630       P:00C1 5F4A00            move                          b,y:(r2)+n2
631    
632       P:00C2 205A1B            clr     b         (r2)+
633       P:00C3 F09900            move              x:(r1)+,x0  y:(r4)+,y0
634       P:00C4 060AA0            rep     #oftaps-1
635       P:00C5 F099DA            mac     x0,y0,b   x:(r1)+,x0  y:(r4)+,y0
636       P:00C6 2054DB            macr    x0,y0,b   (r4)-
637       P:00C7 5F4A00            move                          b,y:(r2)+n2
638    
639                      ; AGC control
640       P:00C8 5E9800            move                          y:<s1,a
641                                if      Channel
643                                else
644       P:00C9 200026            abs     a
645                                endif
646       P:00CA 4CA400            move                          y:<agcmax,x0
647       P:00CB 45F445            cmp     x0,a      #>1,x1
                 000001
648       P:00CD 028040            tlo     x0,a
649       P:00CE 5E2400            move                          a,y:<agcmax
650    
651       P:00CF 5EA300            move                          y:<agcn,a   ; if one block searched
652       P:00D0 45F464            sub     x1,a      #>agcN,x1
                 00000F
653       P:00D2 5E2300            move                          a,y:<agcn
654       P:00D3 0E20E0            jne     <_agc
655    
656       P:00D4 4D2300            move                          x1,y:<agcn  ; calculate error and filter it
657       P:00D5 5EA41B            clr     b                     y:<agcmax,a
658       P:00D6 5F2400            move                          b,y:<agcmax
659       P:00D7 57F400            move              #refLev+refLev/3,b
                 666666
660    
661       P:00D9 45F41C            sub     a,b       #>@pow(2,-5)*agcGain/(fs/agcN),x1 ; rectangular integration
                 002000
662       P:00DB 21E400            move              b,x0
663       P:00DC 5EA200            move                          y:<agc,a
664       P:00DD 2000A3            macr    x0,x1,a
665       P:00DE 200026            abs     a
666       P:00DF 5E2200            move                          a,y:<agc
667                      _agc
668    
669                      ; Symbol synchro
670       P:00E0 5E9900            move                          y:<d1,a     ; z = (d3 - d1) * s2
671       P:00E1 4C9B00            move                          y:<d3,x0
672       P:00E2 4C9A44            sub     x0,a                  y:<s2,x0
673       P:00E3 21C500            move              a,x1
674       P:00E4 4C9FA1            mpyr    x0,x1,a               y:<rwf,x0
675       P:00E5 21C500            move              a,x1
676    
677       P:00E6 5F9C00            move                          y:<rwfilt,b ; filter the zero crossing
678       P:00E7 44F4AB            macr    x0,x1,b   #0.3,x0
                 266666
679    
680       P:00E9 20004F            cmpm    x0,b      ; check if limits reached
681       P:00EA 0E90F4            jlt     <_sync2
682       P:00EB 20000B            tst     b
683       P:00EC 0AF0A3            jpl     _sync1
                 0000F2
684       P:00EE 0D014F            jsr     <retard
685       P:00EF 20001B            clr     b
686       P:00F0 0AF080            jmp     _sync2
                 0000F4
687       P:00F2 0D015C  _sync1    jsr     <advance
688       P:00F3 20001B            clr     b
689       P:00F4 5F1C00  _sync2    move                          b,y:<rwfilt
690                      _sync3
691    
692                      ; unscramble symbol, result in C
693       P:00F5 5E9900            move                          y:<d1,a     ; databit to C
694       P:00F6 200032            asl     a
695       P:00F7 559E00            move              x:<usrem,b1
696       P:00F8 0E00FC            jcc     <unscram
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 5
G3RUH demodulator


697       P:00F9 44F400            move              #>(poly<<1)|1,x0
                 021001
698       P:00FB 20004B            eor     x0,b
699       P:00FC 20002B  unscram   lsr     b
700       P:00FD 551E00            move              b1,x:<usrem
701    
702                      ; make symbol decision (with NRZ-S decoding), databit in C, result in C
703       P:00FE 4CA03F            rol     b                     y:<prvrsym,x0
704       P:00FF 5D204B            eor     x0,b                  b1,y:<prvrsym
705       P:0100 20001F            not     b
706       P:0101 20002B            lsr     b
707    
708                      ; forward to the HDLC handler
709                                if      kiss
710                                putbit
712                                endif
713    
714                      ; Get next bit to be sent
715                                if      kiss
716                                getbit  ; fetch a new one
718       P:0104 0E2106            jne     <_gb1
719                                endif
720       P:0105 00FEB9            andi    #$fe,ccr  ; send zero if no data to be sent
721    
722       P:0106 4CA137  _gb1      rol     a                     y:<prvxsym,x0 ; NRZ-S coding
723       P:0107 200017            not     a
724       P:0108 200043            eor     x0,a
725       P:0109 5C2127            ror     a                     a1,y:<prvxsym
726    
727       P:010A 200013            clr     a         ; scrambler, databit in C flag, result in a (-1 or 1)
728       P:010B 449D37            rol     a         x:<srem,x0
729       P:010C 45F443            eor     x0,a      #-OLevel,x1
                 D9999A
730       P:010E 44F423            lsr     a         #>poly,x0
                 010800
731       P:0110 0E0112            jcc     <_gb2
732       P:0111 200043            eor     x0,a
733       P:0112 541D00  _gb2      move              a1,x:<srem
734       P:0113 56F400            move              #OLevel,a
                 266666
735       P:0115 020060            tcc     x1,a
736    
737       P:0116 0A1FA0            jset    #xmit,x:<flag,_out1 ; if xmit off, then mute output
                 000119
738       P:0118 200013            clr     a
739       P:0119 5E6400  _out1     move                          a,y:(r4)    ; put bit to output filter
740    
741    
742                      ; calculate eye opening
743       P:011A 5F9900            move                          y:<d1,b
744       P:011B 4C9800            move                          y:<s1,x0
745       P:011C 20004C            sub     x0,b
746       P:011D 45F42E            abs     b         #DCDFil,x1
                 028F5C
747    
748                      ; filter it (with first order IIR filter)
749       P:011F 21E400            move              b,x0
750       P:0120 44F4A8            mpy     x0,x1,b   #(1.0-DCDFil),x0
                 7D70A4
751       P:0122 4D9D00            move                          y:<eyefilt,x1
752       P:0123 2000AB            macr    x0,x1,b
753       P:0124 5F1D00            move                          b,y:<eyefilt
754    
755                      ; and make decision if carrier detected
756       P:0125 0A1FA1            jset    #car,x:<flag,_caron
                 000135
757       P:0127 44F400            move              #0.16+0.03,x0 ; check if carrier appeared
                 1851EC
758       P:0129 44F44D            cmp     x0,b      #>DCDN,x0
                 000B40
759       P:012B 0AF0A7            jgt     _car2
                 000145
760    
761       P:012D 4C1E00            move                          x0,y:<DCDn
762    
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 6
G3RUH demodulator


763       P:012E 44F400            move              #rwfc1,x0
                 266666
764       P:0130 4C1F00            move                          x0,y:<rwf
765                                carled  set
767       P:0132 0A1F21            bset    #car,x:<flag
768                                caron
770       P:0134 0C0145            jmp     <_car2
771    
772       P:0135 44F400  _caron    move              #0.16-0.03,x0 ; check if carrier disappeared
                 10A3D7
773       P:0137 5F9E4D            cmp     x0,b                  y:<DCDn,b
774       P:0138 0AF0A9            jlt     _car2
                 000145
775    
776       P:013A 44F400            move              #>1,x0      ; no carrier after DCDN symbols
                 000001
777       P:013C 44F44C            sub     x0,b      #rwfc0,x0
                 7EB852
778       P:013E 5F1E00            move                          b,y:<DCDn
779       P:013F 0AF0A2            jne     _car2
                 000145
780    
781       P:0141 4C1F00            move                          x0,y:<rwf
782                                carled  clr
784       P:0143 0A1F01            bclr    #car,x:<flag
785                                caroff
787                      _car2
788    
789                                if      !kiss
792                                endif
793    
794                      ; all this again, sigh!
795       P:0145 0C0060            jmp     <loop
796    
797    
798                      ; KISS parameter handling
799       P:0146 00000C  reject    rts
800    
801                      ; transmitter PTT control
802       P:0147 0AF0A0  ptt       jcc     _pttoff
                 00014C
803                                pttled  set
809       P:014A 0A1F20            bset    #xmit,x:<flag
810       P:014B 00000C            rts
811                      _pttoff   pttled  clr
817       P:014D 0A1F00            bclr    #xmit,x:<flag
818       P:014E 00000C            rts
819    
820                      ; retard sampling
821       P:014F 569B00  retard    move              x:<eadr,a   ; select previous filter tap set
822       P:0150 44F400            move              #>iftaps,x0
                 00001C
823       P:0152 44F444            sub     x0,a      #>icoeffs,x0
                 00003B
824       P:0154 44F445            cmp     x0,a      #>ifbnks*iftaps,x0
                 0000E0
825       P:0156 0E0159            jhs     <_adv1
826       P:0157 205A00            move              (r2)+
827       P:0158 204A40            add     x0,a      (r2)+n2     ; jumped over the first taps set
828       P:0159 561B40  _adv1     add     x0,a      a,x:<eadr   ; store those new tap set addresses
829       P:015A 561C00            move              a,x:<oadr
830       P:015B 00000C            rts
831    
832                      ; advance sampling
833       P:015C 569B00  advance   move              x:<eadr,a   ; select next filter tap set
834       P:015D 44F400            move              #>iftaps,x0
                 00001C
835       P:015F 44F440            add     x0,a      #>icoeffs+ifbnks*iftaps,x0
                 00011B
836       P:0161 44F445            cmp     x0,a      #>ifbnks*iftaps,x0
                 0000E0
837       P:0163 0E8166            jlo     <_ret1
838       P:0164 205200            move              (r2)-
839       P:0165 204244            sub     x0,a      (r2)-n2     ; jumped over the first taps set
840       P:0166 561B40  _ret1     add     x0,a      a,x:<eadr   ; store those new tap set addresses
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 7
G3RUH demodulator


841       P:0167 561C00            move              a,x:<oadr
842       P:0168 00000C            rts
843    
844                                if      !kiss
846                                endif
847    
848    
849                                if      iDuplex
850       P:0C04                   org     p:kiss_pars+4
851    
852       P:0C04                   dc      -1        ; full-duplex at start-up
853                                endif
854    
855    
856       X:0018                   org     x:
857    
858       X:0018         n         dc      8
859    
860       X:0019         hpf       ds      2         ; data storage for the input DC-cancellation IIR filter
861    
862       X:001B         eadr      dc      icoeffs   ; input polyphase filter even bank pointer
863       X:001C         oadr      dc      icoeffs+ifbnks*iftaps ; input polyphase filter odd  bank pointer
864    
865       X:001D         srem      ds      1
866       X:001E         usrem     ds      1
867    
868       X:001F         flag      dc      0
869    
870                                include 'filtx.asm'
871                      ; Output multirate raised cosine filter
872                      ; Produced by MATLAB (17-Jul-94)
873       00000B         oftaps    equ     11
874       000005         ofbnks    equ     5
875    
876       X:0020         ocoeffs   dc      1.644457e-04,-1.504433e-03,2.385762e-03,1.674666e-02
877       X:0024                   dc      -1.088596e-01,5.989722e-01,3.432659e-01,-5.464372e-02
878       X:0028                   dc      5.612879e-05,4.056970e-03,-7.251839e-04
879    
880       X:002B                   dc      5.203691e-04,-1.647690e-03,-2.131887e-03,3.241543e-02
881       X:002F                   dc      -1.269868e-01,8.030427e-01,9.854408e-02,3.074350e-03
882       X:0033                   dc      -9.180722e-03,2.196331e-03,2.954776e-04
883    
884       X:0036                   dc      6.201181e-04,-3.993065e-04,-7.471807e-03,3.183892e-02
885       X:003A                   dc      -6.504636e-02,8.817981e-01,-6.707127e-02,3.399076e-02
886       X:003E                   dc      -8.337602e-03,-4.715450e-04,7.199058e-04
887    
888       X:0041                   dc      2.479836e-04,1.881502e-03,-8.309344e-03,2.901430e-03
889       X:0045                   dc      9.617447e-02,8.078832e-01,-1.317905e-01,3.488017e-02
890       X:0049                   dc      -2.404078e-03,-1.965893e-03,5.765207e-04
891    
892       X:004C                   dc      -6.027904e-04,3.516846e-03,5.127770e-05,-5.194205e-02
893       X:0050                   dc      3.370923e-01,6.062329e-01,-1.137336e-01,1.817043e-02
894       X:0054                   dc      2.720424e-03,-1.807943e-03,0.000000e+00
895    
896       X:0400         buffer    dsm     buflen*4
897    
898    
899       Y:0018                   org     y:
900    
901       Y:0018         s1        ds      1
902       Y:0019         d1        ds      1
903       Y:001A         s2        ds      1
904       Y:001B         d3        ds      1
905    
906       Y:001C         rwfilt    dc      0
907       Y:001D         eyefilt   dc      0
908       Y:001E         DCDn      dc      DCDN
909       Y:001F         rwf       dc      rwfc0
910    
911       Y:0020         prvrsym   ds      1         ; previous received symbol
912       Y:0021         prvxsym   ds      1         ; previous xmitted symbol
913    
914       Y:0022         agc       dc      @pow(2,-7)
915       Y:0023         agcn      dc      agcN      ; agc block counter
916       Y:0024         agcmax    dc      0
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  g3ruh.asm  Page 8
G3RUH demodulator


917    
918       Y:0030         filtx     dsm     oftaps
919    
920                                include 'filtr.asm'
921                      ; Input multirate, interpolation and raised cosine filter
922                      ; Produced by MATLAB (19-Jul-94)
923       00001C         iftaps    equ     28
924       000008         ifbnks    equ     8
925    
926                      ; Input filter even part
927       Y:003B         icoeffs   dc      1.329706e-05,3.924698e-05,8.760116e-04,1.477363e-03
928       Y:003F                   dc      1.140257e-03,-2.206576e-03,-9.605002e-03,-1.769563e-02
929       Y:0043                   dc      -1.734849e-02,2.796666e-03,4.858163e-02,1.132852e-01
930       Y:0047                   dc      1.772121e-01,2.159940e-01,2.133782e-01,1.704168e-01
931       Y:004B                   dc      1.048885e-01,4.133357e-02,-1.651849e-03,-1.891216e-02
932       Y:004F                   dc      -1.740436e-02,-8.717248e-03,-1.525536e-03,1.417046e-03
933       Y:0053                   dc      1.488979e-03,7.939218e-04,5.330688e-06,-1.670007e-06
934    
935       Y:0057                   dc      -4.216658e-05,-1.044840e-04,7.506352e-04,1.451274e-03
936       Y:005B                   dc      1.677234e-03,-6.166012e-04,-7.264751e-03,-1.640500e-02
937       Y:005F                   dc      -2.017703e-02,-6.912373e-03,3.175383e-02,9.292505e-02
938       Y:0063                   dc      1.598427e-01,2.081126e-01,2.180767e-01,1.857147e-01
939       Y:0067                   dc      1.248583e-01,5.926047e-02,9.897174e-03,-1.434840e-02
940       Y:006B                   dc      -1.759613e-02,-1.067046e-02,-3.195389e-03,6.477284e-04
941       Y:006F                   dc      1.411814e-03,1.015851e-03,-3.052778e-05,5.324129e-06
942    
943       Y:0073                   dc      -4.366212e-05,-9.739543e-05,6.545850e-04,1.342415e-03
944       Y:0077                   dc      1.804911e-03,1.722784e-04,-5.706474e-03,-1.492705e-02
945       Y:007B                   dc      -2.071642e-02,-1.162791e-02,2.205181e-02,7.999910e-02
946       Y:007F                   dc      1.478207e-01,2.016444e-01,2.198593e-01,1.949708e-01
947       Y:0083                   dc      1.377890e-01,7.116073e-02,1.753095e-02,-1.156738e-02
948       Y:0087                   dc      -1.810894e-02,-1.228414e-02,-4.421130e-03,1.873044e-04
949       Y:008B                   dc      1.415259e-03,1.116384e-03,-5.788162e-05,5.004941e-06
950    
951       Y:008F                   dc      -2.151334e-20,-3.432007e-20,5.518829e-04,1.177438e-03
952       Y:0093                   dc      1.591011e-03,2.059060e-04,-5.022291e-03,-1.358596e-02
953       Y:0097                   dc      -1.945943e-02,-1.172191e-02,1.963765e-02,7.548632e-02
954       Y:009B                   dc      1.428459e-01,1.984866e-01,2.200963e-01,1.984866e-01
955       Y:009F                   dc      1.428459e-01,7.548632e-02,1.963765e-02,-1.172191e-02
956       Y:00A3                   dc      -1.945943e-02,-1.358596e-02,-5.022291e-03,2.059060e-04
957       Y:00A7                   dc      1.591011e-03,1.177438e-03,-1.724617e-20,-1.280673e-20
958    
959       Y:00AB                   dc      3.650439e-05,7.248276e-05,3.874720e-04,1.019568e-03
960       Y:00AF                   dc      1.371597e-03,1.873044e-04,-4.421130e-03,-1.228414e-02
961       Y:00B3                   dc      -1.810894e-02,-1.156738e-02,1.753095e-02,7.116073e-02
962       Y:00B7                   dc      1.377890e-01,1.949708e-01,2.198593e-01,2.016444e-01
963       Y:00BB                   dc      1.478207e-01,7.999910e-02,2.205181e-02,-1.162791e-02
964       Y:00BF                   dc      -2.071642e-02,-1.492705e-02,-5.706474e-03,1.722784e-04
965       Y:00C3                   dc      1.768407e-03,1.274937e-03,2.092314e-04,-5.794314e-07
966    
967       Y:00C7                   dc      2.938883e-05,5.636789e-05,1.634385e-04,9.080921e-04
968       Y:00CB                   dc      1.369647e-03,6.477284e-04,-3.195389e-03,-1.067046e-02
969       Y:00CF                   dc      -1.759613e-02,-1.434840e-02,9.897174e-03,5.926047e-02
970       Y:00D3                   dc      1.248583e-01,1.857147e-01,2.180767e-01,2.081126e-01
971       Y:00D7                   dc      1.598427e-01,9.292505e-02,3.175383e-02,-6.912373e-03
972       Y:00DB                   dc      -2.017703e-02,-1.640500e-02,-7.264751e-03,-6.166012e-04
973       Y:00DF                   dc      1.647845e-03,1.400230e-03,5.566689e-04,3.275081e-06
974    
975       Y:00E3                   dc      -7.678584e-06,-1.434860e-05,-3.101461e-05,8.358586e-04
976       Y:00E7                   dc      1.502276e-03,1.417046e-03,-1.525536e-03,-8.717248e-03
977       Y:00EB                   dc      -1.740436e-02,-1.891216e-02,-1.651849e-03,4.133357e-02
978       Y:00EF                   dc      1.048885e-01,1.704168e-01,2.133782e-01,2.159940e-01
979       Y:00F3                   dc      1.772121e-01,1.132852e-01,4.858163e-02,2.796666e-03
980       Y:00F7                   dc      -1.734849e-02,-1.769563e-02,-9.605002e-03,-2.206576e-03
981       Y:00FB                   dc      1.147936e-03,1.490041e-03,9.123569e-04,-2.689898e-06
982    
983       Y:00FF                   dc      -3.082973e-05,-5.645818e-05,-1.030231e-04,7.626422e-04
984       Y:0103                   dc      1.527134e-03,1.898530e-03,-2.408664e-04,-6.890268e-03
985       Y:0107                   dc      -1.654278e-02,-2.162454e-02,-1.031714e-02,2.650862e-02
986       Y:010B                   dc      8.706158e-02,1.553712e-01,2.068938e-01,2.207890e-01
987       Y:010F                   dc      1.914045e-01,1.314081e-01,6.449439e-02,1.262169e-02
988       Y:0113                   dc      -1.398550e-02,-1.853997e-02,-1.176993e-02,-3.812312e-03
989       Y:0117                   dc      5.727853e-04,1.525273e-03,1.128120e-03,-2.496413e-05
990    
991                      ; Input filter odd part
Motorola DSP56000 Assembler  Version 3.1  96-03-22  20:26:21  filtr.asm  Page 9
G3RUH demodulator


992       Y:011B                   dc      2.617030e-07,6.021975e-04,1.210605e-03,1.548649e-03
993       Y:011F                   dc      -2.814891e-05,-5.470762e-03,-1.401329e-02,-1.931313e-02
994       Y:0123                   dc      -1.034717e-02,2.256103e-02,7.955385e-02,1.469056e-01
995       Y:0127                   dc      2.010979e-01,2.202489e-01,1.961392e-01,1.389412e-01
996       Y:012B                   dc      7.143374e-02,1.660525e-02,-1.327523e-02,-1.978515e-02
997       Y:012F                   dc      -1.328472e-02,-4.626652e-03,4.453181e-04,1.667277e-03
998       Y:0133                   dc      1.184831e-03,-3.979576e-05,-1.964820e-05,-1.181120e-05
999    
1000      Y:0137                   dc      -4.246166e-06,3.356215e-04,1.041578e-03,1.702810e-03
1001      Y:013B                   dc      1.002999e-03,-3.384221e-03,-1.187186e-02,-1.966682e-02
1002      Y:013F                   dc      -1.637892e-02,9.091898e-03,6.027803e-02,1.271418e-01
1003      Y:0143                   dc      1.878047e-01,2.185807e-01,2.066900e-01,1.574505e-01
1004      Y:0147                   dc      9.113187e-02,3.165527e-02,-5.362713e-03,-1.797691e-02
1005      Y:014B                   dc      -1.469935e-02,-6.600362e-03,-7.768121e-04,1.271679e-03
1006      Y:014F                   dc      1.159460e-03,2.225179e-04,7.759348e-05,4.520589e-05
1007   
1008      Y:0153                   dc      -6.978141e-06,1.100335e-04,9.097953e-04,1.658568e-03
1009      Y:0157                   dc      1.412173e-03,-2.176969e-03,-1.017182e-02,-1.890929e-02
1010      Y:015B                   dc      -1.878177e-02,1.839512e-03,4.856973e-02,1.140611e-01
1011      Y:015F                   dc      1.780460e-01,2.161034e-01,2.125305e-01,1.691363e-01
1012      Y:0163                   dc      1.040909e-01,4.166832e-02,-2.453187e-04,-1.711629e-02
1013      Y:0167                   dc      -1.601482e-02,-8.133986e-03,-1.608547e-03,1.095792e-03
1014      Y:016B                   dc      1.247619e-03,5.628666e-04,1.004185e-04,5.615105e-05
1015   
1016      Y:016F                   dc      -1.157848e-20,-2.326084e-20,8.489062e-04,1.477126e-03
1017      Y:0173                   dc      1.267588e-03,-1.855970e-03,-9.116352e-03,-1.747117e-02
1018      Y:0177                   dc      -1.803667e-02,6.485008e-04,4.498353e-02,1.090439e-01
1019      Y:017B                   dc      1.737064e-01,2.145388e-01,2.145388e-01,1.737064e-01
1020      Y:017F                   dc      1.090439e-01,4.498353e-02,6.485008e-04,-1.803667e-02
1021      Y:0183                   dc      -1.747117e-02,-9.116352e-03,-1.855970e-03,1.267588e-03
1022      Y:0187                   dc      1.477126e-03,8.489062e-04,-4.477418e-20,-3.309182e-20
1023   
1024      Y:018B                   dc      8.773008e-06,-1.677986e-05,8.102853e-04,1.307802e-03
1025      Y:018F                   dc      1.095792e-03,-1.608547e-03,-8.133986e-03,-1.601482e-02
1026      Y:0193                   dc      -1.711629e-02,-2.453187e-04,4.166832e-02,1.040909e-01
1027      Y:0197                   dc      1.691363e-01,2.125305e-01,2.161034e-01,1.780460e-01
1028      Y:019B                   dc      1.140611e-01,4.856973e-02,1.839512e-03,-1.878177e-02
1029      Y:019F                   dc      -1.890929e-02,-1.017182e-02,-2.176969e-03,1.412173e-03
1030      Y:01A3                   dc      1.705946e-03,1.026994e-03,-1.373851e-04,-6.716106e-05
1031   
1032      Y:01A7                   dc      7.904685e-06,-3.225802e-06,7.074337e-04,1.220075e-03
1033      Y:01AB                   dc      1.271679e-03,-7.768121e-04,-6.600362e-03,-1.469935e-02
1034      Y:01AF                   dc      -1.797691e-02,-5.362713e-03,3.165527e-02,9.113187e-02
1035      Y:01B3                   dc      1.574505e-01,2.066900e-01,2.185807e-01,1.878047e-01
1036      Y:01B7                   dc      1.271418e-01,6.027803e-02,9.091898e-03,-1.637892e-02
1037      Y:01BB                   dc      -1.966682e-02,-1.187186e-02,-3.384221e-03,1.002999e-03
1038      Y:01BF                   dc      1.740111e-03,1.122398e-03,-1.492942e-04,-6.486063e-05
1039   
1040      Y:01C3                   dc      -2.246644e-06,-8.489095e-07,5.053837e-04,1.164639e-03
1041      Y:01C7                   dc      1.667277e-03,4.453181e-04,-4.626652e-03,-1.328472e-02
1042      Y:01CB                   dc      -1.978515e-02,-1.327523e-02,1.660525e-02,7.143374e-02
1043      Y:01CF                   dc      1.389412e-01,1.961392e-01,2.202489e-01,2.010979e-01
1044      Y:01D3                   dc      1.469056e-01,7.955385e-02,2.256103e-02,-1.034717e-02
1045      Y:01D7                   dc      -1.931313e-02,-1.401329e-02,-5.470762e-03,-2.814891e-05
1046      Y:01DB                   dc      1.539084e-03,1.191805e-03,5.701804e-05,2.045353e-05
1047   
1048      Y:01DF                   dc      -9.631001e-06,-8.060780e-06,2.648173e-04,1.067928e-03
1049      Y:01E3                   dc      1.868732e-03,1.304420e-03,-2.969851e-03,-1.166577e-02
1050      Y:01E7                   dc      -2.035504e-02,-1.875820e-02,4.684636e-03,5.450542e-02
1051      Y:01EB                   dc      1.217058e-01,1.847805e-01,2.193447e-01,2.111043e-01
1052      Y:01EF                   dc      1.638676e-01,9.725282e-02,3.569798e-02,-3.911715e-03
1053      Y:01F3                   dc      -1.842444e-02,-1.584155e-02,-7.496354e-03,-1.113028e-03
1054      Y:01F7                   dc      1.298261e-03,1.279307e-03,3.974903e-04,1.001137e-04
1055   
1056      Y:0400                   dsm     buflen*4
1057   
1058                               end

0    Errors
0    Warnings





